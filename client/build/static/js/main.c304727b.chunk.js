(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{136:function(e,t,a){e.exports=a.p+"static/media/memories.ff371027.png"},164:function(e,t,a){e.exports=a(218)},169:function(e,t,a){},216:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=(a(169),a(250)),i=a(100),s=a(101),u=a(20),m=a(243),p=a(244),d=a(265),g=a(245),f=a(26),b=a(17),v=a(135),E=a(13),h=a(136),O=a.n(h),j=a(24),y=a(240),x=a(242),C=Object(y.a)((function(e){return{appBar:Object(j.a)({borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},e.breakpoints.down("sm"),{flexDirection:"column"}),heading:{color:e.palette.primary.main,textDecoration:"none",fontSize:"2em",fontWeight:300},image:{marginLeft:"10px",marginTop:"5px"},toolbar:Object(j.a)({display:"flex",justifyContent:"flex-end",width:"250px"},e.breakpoints.down("sm"),{width:"auto"}),profile:Object(j.a)({display:"flex",justifyContent:"space-between",width:"400px",alignItems:"center"},e.breakpoints.down("sm"),{width:"auto",marginTop:20,justifyContent:"center"}),logout:{marginLeft:"20px"},userName:{display:"flex",alignItems:"center",textAlign:"center"},brandContainer:{display:"flex",alignItems:"center"},purple:{color:e.palette.getContrastText(x.a[500]),backgroundColor:x.a[500]}}})),N=function(){var e=C(),t=Object(b.h)(),a=Object(b.g)(),c=Object(E.b)(),o=Object(n.useState)(),l=Object(u.a)(o,2),i=l[0],h=l[1];Object(n.useEffect)((function(){var e=null===i||void 0===i?void 0:i.token;e&&(1e3*Object(v.a)(e).exp<(new Date).getTime()&&j());h(JSON.parse(localStorage.getItem("profile")))}),[t]);var j=function(){c({type:"LOGOUT"}),h(null),a.push("/auth")};return r.a.createElement(m.a,{className:e.appBar,position:"static",color:"inherit"},r.a.createElement(f.b,{to:"/",className:e.brandContainer},r.a.createElement("img",{className:e.image,src:O.a,alt:"icon",height:"50px"})),r.a.createElement(p.a,{className:e.toolbar},(null===i||void 0===i?void 0:i.result)?r.a.createElement("div",{className:e.profile},r.a.createElement(d.a,{className:e.purple,alt:null===i||void 0===i?void 0:i.result.name,src:null===i||void 0===i?void 0:i.result.imageUrl},null===i||void 0===i?void 0:i.result.name.charAt(0)),r.a.createElement(s.a,{className:e.userName,variant:"h6"},null===i||void 0===i?void 0:i.result.name),r.a.createElement(g.a,{variant:"contained",className:e.logout,color:"secondary",onClick:j},"Logout")):r.a.createElement(g.a,{component:f.b,to:"/auth",variant:"contained",color:"primary"},"Sign In")))},S=a(14),w=a.n(S),k=a(28),I=a(6),T=a(251),A=a(252),D=a(253),P=a(254),_=a(255),L=a(246),F=a(141),R=a(145),z=a.n(R),B=a(142),G=a.n(B).a.create({baseURL:"https://mymemo-app.herokuapp.com"});G.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var U=function(e){return G.get("/posts/".concat(e))},W=function(e){return G.get("/posts?page=".concat(e))},H=function(e,t,a){return G.patch("/posts/".concat(e),t)},M=function(e){return G.patch("/posts/".concat(e,"/likePost"))},J=function(e){return G.delete("/posts/".concat(e))},q=function(e){return G.get("/posts/search?searchQuery=".concat(e.search||"none","&tags=").concat(e.tags))},K=function(){return r.a.createElement("svg",{style:{width:"20px",height:"20px"},viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"}))},V=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),Q=a(262),Y=a(248),Z=a(249),X=a(143),$=a.n(X),ee=a(144),te=a.n(ee),ae=function(e){var t=e.name,a=e.handleChange,n=e.label,c=e.half,o=e.autoFocus,l=e.type,i=e.handleShowPassword;return r.a.createElement(L.a,{item:!0,xs:12,sm:c?6:12},r.a.createElement(Q.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:o,type:l,InputProps:"password"===t?{endAdornment:r.a.createElement(Y.a,{position:"end"},r.a.createElement(Z.a,{onClick:i},"password"===l?r.a.createElement($.a,null):r.a.createElement(te.a,null)))}:null}))},ne={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},re=function(){var e=Object(n.useState)(ne),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),m=Object(u.a)(o,2),p=m[0],f=m[1],v=Object(n.useState)(!1),h=Object(u.a)(v,2),O=h[0],y=h[1],x=Object(E.b)(),C=function(){y(!1)},N=Object(b.g)(),S=V(),R=Object(n.useState)(!1),B=Object(u.a)(R,2),G=B[0],U=B[1],W=function(e){c(Object(I.a)(Object(I.a)({},a),{},Object(j.a)({},e.target.name,e.target.value)))},H=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===t||void 0===t?void 0:t.profileObj,n=null===t||void 0===t?void 0:t.tokenId;try{x({type:"AUTH",data:{result:a,token:n}}),N.push("/")}catch(r){console.log(r)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(l.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,{className:S.paper,elevation:3},r.a.createElement(d.a,{className:S.avatar},r.a.createElement(z.a,null)),r.a.createElement(s.a,{component:"h1",variant:"h5"},p?"Sign up":"Sign in"),r.a.createElement("form",{className:S.form,onSubmit:function(e){e.preventDefault(),y(!0)}},r.a.createElement(T.a,{open:O,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(A.a,{id:"alert-dialog-title"},"Use Google's Signin Please"),r.a.createElement(D.a,null,r.a.createElement(P.a,{id:"alert-dialog-description"},"Regular Authentication is not available right now so  please Sign In with Google Authentification (Yla bghiti ze3ma)")),r.a.createElement(_.a,null,r.a.createElement(g.a,{onClick:C,color:"primary",autoFocus:!0},"Ok"))),r.a.createElement(L.a,{container:!0,spacing:2},p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{name:"firstName",label:"First Name",handleChange:W,autoFocus:!0,half:!0}),r.a.createElement(ae,{name:"lastName",label:"Last Name",handleChange:W,half:!0})),r.a.createElement(ae,{name:"email",label:"Email Address",handleChange:W,type:"email"}),r.a.createElement(ae,{name:"password",label:"Password",handleChange:W,type:G?"text":"password",handleShowPassword:function(){return U(!G)}}),p&&r.a.createElement(ae,{name:"confirmPassword",label:"Repeat Password",handleChange:W,type:"password"})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:S.submit},p?"Sign Up":"Sign In"),r.a.createElement(F.GoogleLogin,{clientId:"757253811746-u6vm73a1d8b4qhg5u59q6cit61t3heeq.apps.googleusercontent.com",render:function(e){return r.a.createElement(g.a,{className:S.googleButton,color:"primary",fullWidth:!0,onClick:e.onClick,disabled:e.disabled,startIcon:r.a.createElement(K,null),variant:"contained"},"Google Sign In")},onSuccess:H,onFailure:function(){console.log("Failed")},cookiePolicy:"single_host_origin"}),r.a.createElement(L.a,{container:!0,justify:"flex-end"},r.a.createElement(L.a,{item:!0},r.a.createElement(g.a,{onClick:function(){f(!p),U(!1)}},p?"Already have an account? Sign in":"Don't have an account? Sign Up"))))))},ce=a(88),oe=a(247),le=a(146),ie=a.n(le),se=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,q(e);case 4:n=t.sent,r=n.data.data,a({type:"FETCH_BY_SEARCH",payload:{data:r}}),a({type:"END_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},ue=function(e,t){return function(){var a=Object(k.a)(w.a.mark((function a(n){var r,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"START_UPDATING"}),a.next=4,H(e,t);case 4:r=a.sent,c=r.data,n({type:"UPDATE",payload:c}),n({type:"END_UPDATING"}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0.message);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},me=function(){return r.a.createElement("div",{className:"shimmer-wrapper"},r.a.createElement("div",{className:"shimmer"}))};a(216);var pe=function(e){var t=e.type,a="skeleton ".concat(t);return r.a.createElement("div",{className:a})},de=function(e){var t=e.theme||"light";return r.a.createElement("div",{className:"skeleton-wrapper ".concat(t)},r.a.createElement("div",{className:"skeleton-article"},r.a.createElement(pe,{type:"thumbnail"}),r.a.createElement(pe,{type:"title"}),r.a.createElement(pe,{type:"text"}),r.a.createElement(pe,{type:"text"})),r.a.createElement(me,null))},ge=a(256),fe=a(257),be=a(156),ve=a(258),Ee=a(259),he=a(149),Oe=a.n(he),je=a(148),ye=a.n(je),xe=a(150),Ce=a.n(xe),Ne=a(147),Se=a.n(Ne),we=a(85),ke=a.n(we),Ie=a(134),Te=Object(y.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white",zIndex:"99"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"},cardAction:{display:"block",textAlign:"initial"}}),Ae=function(e){var t,a=e.post,n=e.setCurrentId,c=(e.currentId,Object(E.b)()),o=JSON.parse(localStorage.getItem("profile")),l=Object(b.g)(),i=a.likes.findIndex((function(e){var t,a;return e===String((null===o||void 0===o||null===(t=o.result)||void 0===t?void 0:t.googleId)||(null===o||void 0===o||null===(a=o.result)||void 0===a?void 0:a._id))})),u=Te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:u.card,raised:!0,elevation:6},r.a.createElement(fe.a,{className:u.media,image:a.slectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:a.title}),r.a.createElement("div",{className:u.overlay},r.a.createElement(s.a,{variant:"h6"},a.name),r.a.createElement(s.a,{variant:"body2"},ke()(a.createdAt).fromNow())),r.a.createElement("div",{className:u.overlay2},r.a.createElement(g.a,{style:{color:"white"},size:"small",onClick:function(){return n(a._id)}},r.a.createElement(Se.a,{fontSize:"default"}))),r.a.createElement(be.a,{component:"span",name:"test",className:u.cardAction,onClick:function(e){l.push("/posts/".concat(a._id))}},r.a.createElement("div",{className:u.details},r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"h3"},a.tags.map((function(e){return r.a.createElement(Ie.a,{label:"#".concat(e)})})))),r.a.createElement(s.a,{className:u.title,gutterBottom:!0,variant:"h5",component:"h2"},a.title),r.a.createElement(ve.a,null,r.a.createElement(s.a,{variant:"body2",color:"textSecondary",component:"p"},a.message))),r.a.createElement(Ee.a,{className:u.cardActions},o?r.a.createElement(Z.a,{onClick:function(){var e;c((e=a._id,function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LIKING"}),t.next=4,M(e);case 4:n=t.sent,r=n.data,a({type:"UPDATE",payload:r}),a({type:"END_LIKING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))},size:"small",color:"primary"},-1===i?r.a.createElement(ye.a,{fontSize:"medium"}):r.a.createElement(Oe.a,{fontSize:"medium"})," ",a.likes.length,"   "):null,o&&a.name==(null===o||void 0===o||null===(t=o.result)||void 0===t?void 0:t.name)?r.a.createElement(Z.a,{size:"small",color:"secondary",onClick:function(){return c((e=a._id,function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J(e);case 3:a({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(Ce.a,{fontSize:"medium"})):null)))},De=Object(y.a)((function(e){return{mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}})),Pe=function(e){var t=e.setCurrentId,a=Object(E.c)((function(e){return e.posts})),n=a.posts,c=a.isLoading,o=De();return n.length||c?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{className:o.container,container:!0,alignItems:"stretch",spacing:3},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(L.a,{key:e._id,item:!0,xs:12,sm:12,md:6,lg:3},r.a.createElement(Ae,{post:e,setCurrentId:t,currentId:e._id}))}))),!n.length&&r.a.createElement(L.a,{className:o.container,container:!0,alignItems:"stretch",spacing:3},[1,2,3,4,5,6,7,8].map((function(e){return r.a.createElement(L.a,{key:e,item:!0,xs:12,sm:12,md:6,lg:3},r.a.createElement(de,{key:e,theme:"dark"}))})))):"No posts"},_e=Object(y.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10},loading:{fontSize:"5px",marginLeft:"10px"},center:{textAlign:"center"}}})),Le=Object(y.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",width:"80%"},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10},loading:{fontSize:"5px",marginLeft:"10px"}}})),Fe=a(223),Re=a(222),ze=a(154),Be=a(86),Ge=a.n(Be),Ue=a(264),We=a(87),He=a.n(We);function Me(e){var t=e.post,a=e.setCurrentId,c=e.currentId,o=Le(),l=Object(E.c)((function(e){return e.posts})).isUpdating,m=Object(n.useState)(!1),p=Object(u.a)(m,2),d=p[0],f=p[1],b=Object(n.useState)(""),v=Object(u.a)(b,2),h=v[0],O=v[1],j=JSON.parse(localStorage.getItem("profile")),y=Object(n.useState)(!1),x=Object(u.a)(y,2),C=x[0],N=x[1],S=Object(n.useState)({title:"",message:"",tags:"",slectedFile:""}),w=Object(u.a)(S,2),k=w[0],T=w[1],A=Object(E.b)(),D=function(e,t){},P=function(){a(0),T({title:"",message:"",tags:"",selectedFile:""})};Object(n.useEffect)((function(){t?(T(t),N(!0)):N(!1)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{className:o.modal,open:C,onClose:function(){N(!1)},BackdropComponent:Re.a,BackdropProps:{timeout:500}},r.a.createElement(ze.a,{in:C},r.a.createElement(i.a,{className:o.paper,elevation:6},r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(o.root," ").concat(o.form),onSubmit:function(e){var t;(e.preventDefault(),c)&&(A(ue(c,Object(I.a)(Object(I.a)({},k),{},{name:null===j||void 0===j||null===(t=j.result)||void 0===t?void 0:t.name}))),P(),O("Update"),f(!0))}},r.a.createElement(s.a,{variant:"h6"},c?"Edit memory":"Create a memory"),r.a.createElement(Q.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:k.title,onChange:function(e){return T(Object(I.a)(Object(I.a)({},k),{},{title:e.target.value}))}}),r.a.createElement(Q.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:k.message,onChange:function(e){return T(Object(I.a)(Object(I.a)({},k),{},{message:e.target.value}))}}),r.a.createElement(Q.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,value:k.tags,onChange:function(e){return T(Object(I.a)(Object(I.a)({},k),{},{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:o.fileInput},r.a.createElement(Ge.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return T(Object(I.a)(Object(I.a)({},k),{},{slectedFile:t}))}})),r.a.createElement(g.a,{className:o.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},c?"Edit":"Post"),r.a.createElement(g.a,{variant:"contained",color:"secondary",size:"small",fullWidth:!0,onClick:P},"Clear"),!l&&r.a.createElement(Ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:d,autoHideDuration:7e3,onClose:D,message:"Post"===h?"Memory added":"Memory updated",action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{size:"small","aria-label":"close",color:"inherit",onClick:D},r.a.createElement(He.a,{fontSize:"small"})))}))))))}var Je=a(260),qe=function(e){var t,a=e.currentId,c=e.setCurrentId,o=(e.props,Object(E.c)((function(e){return e.posts})).isPosting),l=Object(E.c)((function(e){return a?e.posts.posts.find((function(e){return e._id===a})):null})),m=Object(n.useState)(!1),p=Object(u.a)(m,2),d=p[0],f=p[1],b=Object(n.useState)(""),v=Object(u.a)(b,2),h=v[0],O=v[1],j=JSON.parse(localStorage.getItem("profile")),y=_e(),x=Object(n.useState)({title:"",message:"",tags:"",slectefFile:""}),C=Object(u.a)(x,2),N=C[0],S=C[1],T=Object(E.b)(),A=function(e,t){"clickaway"!==t&&f(!1)};Object(n.useEffect)((function(){l&&S(l)}),[l]);var D=function(){c(0),S({title:"",message:"",tags:"",selectedFile:""})};return(null===j||void 0===j||null===(t=j.result)||void 0===t?void 0:t.name)?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:y.paper,elevation:6},r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(y.root," ").concat(y.form),onSubmit:function(e){var t,n;(e.preventDefault(),a)?(T(ue(a,Object(I.a)(Object(I.a)({},N),{},{name:null===j||void 0===j||null===(t=j.result)||void 0===t?void 0:t.name}))),D(),O("Update"),f(!0)):(T(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_POSTING"}),t.next=4,c=e,G.post("/posts",c);case 4:n=t.sent,r=n.data,a({type:"CREATE",payload:r}),a({type:"END_POSTING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}var c}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(Object(I.a)(Object(I.a)({},N),{},{name:null===j||void 0===j||null===(n=j.result)||void 0===n?void 0:n.name}))),o||D(),O("Post"),f(!0))}},r.a.createElement(s.a,{variant:"h6"},a?"Edit memory":"Create a memory"),r.a.createElement(Q.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,onChange:function(e){return S(Object(I.a)(Object(I.a)({},N),{},{title:e.target.value}))}}),r.a.createElement(Q.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,onChange:function(e){return S(Object(I.a)(Object(I.a)({},N),{},{message:e.target.value}))}}),r.a.createElement(Q.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,onChange:function(e){return S(Object(I.a)(Object(I.a)({},N),{},{tags:e.target.value.split(",")}))}}),r.a.createElement("div",{className:y.fileInput},r.a.createElement(Ge.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return S(Object(I.a)(Object(I.a)({},N),{},{slectedFile:t}))}})),r.a.createElement(g.a,{className:y.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},a?"Edit":"Post",o&&r.a.createElement(Je.a,{className:y.loading,color:"secondary"})),r.a.createElement(g.a,{variant:"contained",color:"secondary",size:"small",fullWidth:!0,onClick:D},"Clear"),!o&&r.a.createElement(Ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:d,autoHideDuration:7e3,onClose:A,message:"Post"===h?"Memory added":"Memory updated",action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{size:"small","aria-label":"close",color:"inherit",onClick:A},r.a.createElement(He.a,{fontSize:"small"})))}))),r.a.createElement("div",{className:y.center}),r.a.createElement(Me,{setCurrentId:c,currentId:a,post:l}),r.a.createElement("div",null)):r.a.createElement(i.a,{className:y.paper,elevation:6},r.a.createElement(s.a,{variant:"h6",align:"center"},"Please sign in to create a memory."))},Ke=a(266),Ve=a(263),Qe=Object(y.a)((function(){return{ul:{justifyContent:"space-around"}}})),Ye=function(e){var t=e.page,a=Object(E.c)((function(e){return e.posts})).numberOfPages,c=Object(E.b)(),o=Qe();return Object(n.useEffect)((function(){t&&c(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r,c,o,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,W(e);case 4:n=t.sent,r=n.data,c=r.data,o=r.currentPage,l=r.numberOfPages,a({type:"FETCH_ALL",payload:{data:c,currentPage:o,numberOfPages:l}}),a({type:"END_LOADING"}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[c,t]),r.a.createElement(Ke.a,{classes:{ul:o.ul},count:a,page:Number(t)||1,variant:"outlined",color:"primary",renderItem:function(e){return r.a.createElement(Ve.a,Object.assign({},e,{component:f.b,to:"/posts?page=".concat(e.page)}))}})},Ze=Object(y.a)((function(e){return{appBarSearch:{borderRadius:4,marginBottom:"1rem",display:"flex",padding:"16px"},pagination:{borderRadius:4,marginTop:"1rem",padding:"16px"},gridContainer:Object(j.a)({},e.breakpoints.down("xs"),{flexDirection:"column-reverse"})}}));var Xe=function(){var e=Ze(),t=new URLSearchParams(Object(b.h)().search),a=t.get("page")||1,c=t.get("searchQuery"),o=Object(n.useState)(0),s=Object(u.a)(o,2),p=s[0],d=s[1],f=Object(E.b)(),v=Object(n.useState)(""),h=Object(u.a)(v,2),O=h[0],j=h[1],y=Object(n.useState)([]),x=Object(u.a)(y,2),C=x[0],N=x[1],S=Object(b.g)(),w=function(){O.trim()||C?(f(se({search:O,tags:C.join(",")})),S.push("/posts/search?searchQuery=".concat(O||"none","&tags=").concat(C.join(",")))):S.push("/")};return r.a.createElement(oe.a,{in:!0},r.a.createElement(l.a,{maxWidth:"xl"},r.a.createElement(L.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:3,className:e.gridContainer},r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:9},r.a.createElement(Pe,{setCurrentId:d})),r.a.createElement(L.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(m.a,{className:e.appBarSearch,position:"static",color:"inherit"},r.a.createElement(Q.a,{onKeyDown:function(e){13===e.keyCode&&w()},name:"search",variant:"outlined",label:"Search Memories",fullWidth:!0,value:O,onChange:function(e){return j(e.target.value)}}),r.a.createElement(ie.a,{style:{margin:"10px 0"},value:C,onAdd:function(e){return t=e,N([].concat(Object(ce.a)(C),[t]));var t},onDelete:function(e){return t=e,N(C.filter((function(e){return e!==t})));var t},label:"Search Tags",variant:"outlined"}),r.a.createElement(g.a,{onClick:w,className:e.searchButton,variant:"contained",color:"primary"},"Search")),r.a.createElement(qe,{currentId:p,setCurrentId:d}),!c&&!C.length&&r.a.createElement(i.a,{className:e.pagination,elevation:6},r.a.createElement(Ye,{page:a}))))))},$e=Object(y.a)((function(e){var t;return t={appBar:{borderRadius:4,padding:"10px",margin:"15px 0",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},heading:{color:"#f50057"},image:{marginLeft:"15px"}},Object(j.a)(t,e.breakpoints.down("sm"),{mainContainer:{flexDirection:"column-reverse"}}),Object(j.a)(t,"footer",{padding:"10px",marginTop:"15px",textAlign:"center"}),t})),et=a(261),tt=a(151),at=a.n(tt),nt=Object(y.a)((function(e){return{media:{borderRadius:"20px",objectFit:"cover",width:"100%",maxHeight:"600px"},card:Object(j.a)({display:"flex",width:"100%"},e.breakpoints.down("sm"),{flexWrap:"wrap",flexDirection:"column"}),section:{borderRadius:"20px",margin:"10px",flex:1},imageSection:Object(j.a)({marginLeft:"20px"},e.breakpoints.down("sm"),{marginLeft:0}),recommendedPosts:Object(j.a)({display:"flex"},e.breakpoints.down("sm"),{flexDirection:"column"}),loadingPaper:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderRadius:"15px",height:"39vh"},back:{fontSize:"50px"}}})),rt=function(){var e=Object(E.c)((function(e){return e.posts})),t=e.post,a=e.posts,c=e.isLoading,o=Object(E.b)(),l=(Object(b.g)(),nt()),u=Object(b.i)().id;if(Object(n.useEffect)((function(){o(function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"START_LOADING"}),t.next=4,U(e);case 4:n=t.sent,r=n.data,a({type:"FETCH_POST",payload:{post:r}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(u))}),[u]),Object(n.useEffect)((function(){t&&o(se({search:"none",tags:null===t||void 0===t?void 0:t.tags.join(",")}))}),[t]),!t)return null;if(c)return r.a.createElement(i.a,{elevation:6,className:l.loadingPaper},r.a.createElement(Je.a,{size:"7em"}));a.filter((function(e){return e._id!==t._id}));return r.a.createElement(i.a,{style:{padding:"20px",borderRadius:"15px"},elevation:6},r.a.createElement("div",{className:l.card},r.a.createElement("div",{className:l.section},r.a.createElement(f.b,{to:"/"},r.a.createElement(at.a,{color:"secondary",className:l.back})),r.a.createElement(s.a,{variant:"h3",component:"h2"},t.title),r.a.createElement(s.a,{gutterBottom:!0,variant:"h6",color:"textSecondary",component:"h2"},t.tags.map((function(e){return"#".concat(e," ")}))),r.a.createElement(s.a,{gutterBottom:!0,variant:"body1",component:"p"},t.message),r.a.createElement(s.a,{variant:"h6"},"Created by: ",t.name),r.a.createElement(s.a,{variant:"body1"},ke()(t.createdAt).fromNow()),r.a.createElement(et.a,{style:{margin:"20px 0"}}),r.a.createElement(s.a,{variant:"body1"},r.a.createElement("strong",null,"Realtime Chat - coming soon!")),r.a.createElement(et.a,{style:{margin:"20px 0"}}),r.a.createElement(s.a,{variant:"body1"},r.a.createElement("strong",null,"Comments - coming soon!")),r.a.createElement(et.a,{style:{margin:"20px 0"}})),r.a.createElement("div",{className:l.imageSection},r.a.createElement("img",{className:l.media,src:t.slectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",alt:t.title}))))},ct=function(){var e=JSON.parse(localStorage.getItem("profile")),t=$e();return r.a.createElement(f.a,null,r.a.createElement(l.a,{maxWidth:"xl"},r.a.createElement(N,null),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/",exact:!0,component:function(){return r.a.createElement(b.a,{to:"/posts"})}}),r.a.createElement(b.b,{path:"/posts",exact:!0,component:Xe}),r.a.createElement(b.b,{path:"/posts/search",exact:!0,component:Xe}),r.a.createElement(b.b,{path:"/auth",exact:!0,component:function(){return e?r.a.createElement(Xe,null):r.a.createElement(re,null)}}),r.a.createElement(b.b,{path:"/posts/:id",exact:!0,component:rt})),r.a.createElement(i.a,{elevation:6,className:t.footer},r.a.createElement(s.a,{variant:"h6",color:"primary",component:"h6"},"Developed By Abdllah Lyounsi"),r.a.createElement(s.a,{variant:"h6",component:"h6"},"Copyright 2021 \xa9"))))},ot=a(63),lt=a(152),it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(I.a)({},null===t||void 0===t?void 0:t.data))),Object(I.a)(Object(I.a)({},e),{},{authData:t.data,loading:!1,errors:null});case"LOGOUT":return localStorage.clear(),Object(I.a)(Object(I.a)({},e),{},{authData:null,loading:!1,errors:null});default:return e}},st=Object(ot.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,isPosting:!1,isUpdating:!1,posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(I.a)(Object(I.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(I.a)(Object(I.a)({},e),{},{isLoading:!1});case"START_POSTING":return Object(I.a)(Object(I.a)({},e),{},{isPosting:!0});case"END_POSTING":return Object(I.a)(Object(I.a)({},e),{},{isPosting:!1});case"START_UPDATING":return Object(I.a)(Object(I.a)({},e),{},{isUpdating:!0});case"END_UPDATING":return Object(I.a)(Object(I.a)({},e),{},{isUpdating:!1});case"FETCH_ALL":return Object(I.a)(Object(I.a)({},e),{},{posts:t.payload.data,currentPage:t.payload.currentPage,numberOfPages:t.payload.numberOfPages});case"FETCH_BY_SEARCH":return Object(I.a)(Object(I.a)({},e),{},{posts:t.payload.data});case"FETCH_POST":return Object(I.a)(Object(I.a)({},e),{},{post:t.payload.post});case"LIKE":return Object(I.a)(Object(I.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"CREATE":return Object(I.a)(Object(I.a)({},e),{},{posts:[].concat(Object(ce.a)(e.posts),[t.payload])});case"UPDATE":return Object(I.a)(Object(I.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE":return Object(I.a)(Object(I.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});default:return e}},auth:it}),ut=Object(ot.d)(st,Object(ot.c)(Object(ot.a)(lt.a)));o.a.render(r.a.createElement(E.a,{store:ut},r.a.createElement(ct,null)),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.c304727b.chunk.js.map